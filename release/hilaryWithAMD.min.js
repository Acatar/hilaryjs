/*! hilary-build 2015-07-13 */
!function(a,b){"use strict";if(a.Hilary)return!1;var c,d,e,f,g,h,i,j,k,l,m,n=[],o={},p=[];g={containerRegistration:"hilary::container",parentContainerRegistration:"hilary::parent",singletons:"__singletons",notResolvable:"hilary::handler::not::resolvable",pipeline:{beforeRegister:"hilary::before::register",afterRegister:"hilary::after::register",beforeResolve:"hilary::before::resolve",afterResolve:"hilary::after::resolve",beforeNewChild:"hilary::before::new::child",afterNewChild:"hilary::after::new::child",onError:"hilary::error"}},h=function(){var a,b,c={getType:void 0,defined:void 0,nullOrUndefined:void 0,"function":void 0,object:void 0,array:void 0,string:void 0,"boolean":void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0,not:{defined:void 0,"function":void 0,object:void 0,array:void 0,string:void 0,"boolean":void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0}},d={},e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"];for(a=0;a<e.length;a+=1)b=e[a],d["[object "+b+"]"]=b.toLowerCase();return c.getType=function(a){return"undefined"==typeof a?"undefined":null===a?String(a):"object"==typeof a||"function"==typeof a?d[Object.prototype.toString.call(a)]||"object":typeof a},c.defined=function(a){try{return"undefined"!==c.getType(a)}catch(b){return!1}},c.not.defined=function(a){return c.defined(a)===!1},c.nullOrUndefined=function(a){return c.not.defined(a)||null===a},c.not.nullOrWhitespace=function(a){return"undefined"==typeof a||null===typeof a||c.not.string(a)?!1:/([^\s])/.test(a)},c.nullOrWhitespace=function(a){return c.not.nullOrWhitespace(a)===!1},c["function"]=function(a){return"function"===c.getType(a)},c.not["function"]=function(a){return c["function"](a)===!1},c.object=function(a){return"object"===c.getType(a)},c.not.object=function(a){return c.object(a)===!1},c.array=function(a){return"array"===c.getType(a)},c.not.array=function(a){return c.array(a)===!1},c.string=function(a){return"string"===c.getType(a)},c.not.string=function(a){return c.string(a)===!1},c["boolean"]=function(a){return"boolean"===c.getType(a)},c.not["boolean"]=function(a){return c["boolean"](a)===!1},c.datetime=function(a){return"date"===c.getType(a)},c.not.datetime=function(a){return c.datetime(a)===!1},c.regexp=function(a){return"regexp"===c.getType(a)},c.not.regexp=function(a){return c.regexp(a)===!1},c.number=function(a){return"number"===c.getType(a)},c.not.number=function(a){return c.number(a)===!1},c.money=function(a){return c.defined(a)&&/^(?:-)?[0-9]\d*(?:\.\d{0,2})?$/.test(a.toString())},c.not.money=function(a){return c.money(a)===!1},c.decimal=function(a,b){return c.not.number(a)?!1:!b&&c.number(a)?!0:a&&+(+a||0).toFixed(b)===+a?!0:!1},c.not.decimal=function(a){return c.decimal(a)===!1},c.Window=function(a){return c.is.defined(Window)&&a instanceof Window},c.not.Window=function(a){return c.is.Window(a)===!1},c}(),i=function(){var a,b={createUid:void 0,createGuid:void 0};return a=function(a){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},b.createUid=function(b){var c;return b=b||12,c=new Array(b+1).join("x"),a(c)},b.createGuid=function(){return a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")},b}(),j=function(a){var b={runAsync:void 0};return b.runAsync=function(b,c){c===!0&&a.defined(process)&&a["function"](process.nextTick)?process.nextTick(b):setTimeout(b,0)},b}(h),k=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o={errors:{blueprint:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property ",requiresArguments:"The implementation of this function requires arguments ",missingConstructorArgument:"An object literal is required when constructing a Blueprint",reservedPropertyName_singatureMatches:"signatureMatches is a reserved property name for Blueprints",missingSignatureMatchesImplementationArgument:"A first argument of an object that should implement an interface is required",missingSignatureMatchesCallbackArgument:"A callback function is required as the second argument to signatureMatches"}}};return e=function(a,b,c){var d;a.__interfaces=a.__interfaces||{},d=function(d,e){d||(a.__interfaces[b.__blueprintId]=!0),"function"==typeof c&&c(d,e)},g(a,b,d)},f=function(a,b){var c;return a.__interfaces=a.__interfaces||{},c=h(a,b),c.result&&(a.__interfaces[b.__blueprintId]=!0),c},g=function(a,b,c){var d=h(a,b);d.result?c(null,!0):c(d.errors,!1)},h=function(a,b){var c,d=[];if(a.__interfaces[b.__blueprintId])return{errors:null,result:!0};for(c in b)b.hasOwnProperty(c)&&"__blueprintId"!==c&&"signatureMatches"!==c&&i(a,c,b[c],d);return d.length>0?{errors:d,result:!1}:{errors:null,result:!0}},i=function(a,c,d,e){"bool"===d?n(a,c,e):b.string(d)?k(a,c,d,e):b.object(d)&&j(a,c,d,d.type,e)},j=function(a,c,d,e,f){if(b["function"](d.validate))d.validate(a[c],f);else switch(e){case"function":k(a,c,e,f),l(a,c,d.args,f);break;case"decimal":m(a,c,d.places,f);break;default:k(a,c,e,f)}},k=function(a,c,d,e){if(b["function"](b.not[d])&&b.not[d](a[c])){var f=o.errors.blueprint.requiresProperty;f+="@property: "+c,f+=" ("+d+")",e.push(f)}},l=function(a,c,d,e){var f=b.array(d);f=f&&d.length>0,f=f&&b["function"](a[c]),f=f&&a[c].length===d.length,f||e.push(o.errors.blueprint.requiresArguments+"("+d.join(", ")+")")},m=function(a,c,d,e){if(b.not.decimal(a[c],d)){var f=o.errors.blueprint.requiresProperty;f+="@property: "+c,f+=" (decimal with "+d+" places)",e.push(f)}},n=function(a,c,d){if(b["function"](b.not["boolean"])&&b.not["boolean"](a[c])){var e=o.errors.blueprint.requiresProperty;e+="@property: "+c,e+=" (boolean)",d.push(e)}},d=function(d){var g,h=this;if(b.not.defined(d)||b.not.object(d))throw new Error(o.errors.blueprint.missingConstructorArgument);for(g in d)if(d.hasOwnProperty(g)){if("signatureMatches"===g)throw new Error(o.errors.blueprint.reservedPropertyName_singatureMatches);h[g]=d[g]}b.not.string(h.__blueprintId)&&(h.__blueprintId=c.createUid(8)),h.signatureMatches=function(c,d){if(b.not.defined(c))return void d([o.errors.blueprint.missingSignatureMatchesImplementationArgument]);if(b.not["function"](d))throw new Error(o.errors.blueprint.missingSignatureMatchesCallbackArgument);a.runAsync(function(){e(c,h,d)})},h.syncSignatureMatches=function(a){return b.not.defined(a)?{errors:[o.errors.blueprint.missingSignatureMatchesImplementationArgument],result:!1}:f(a,h)}}}(j,h,i),l=function(a,b){var c,d={};return c=function(c,d,e){var f=a.string(d)?d:c,g=new Error(f);return g.message=f,c!==f&&(g.name=c),e&&(g.data=e),b.onError(g),g},d.makeException=c,d.argumentException=function(b,d,e){var f=a.not.defined(d)?b:b+" (argument: "+d+")";return c("ArgumentException",f,e)},d.dependencyException=function(b,d,e){var f=a.not.defined(d)?b:b+" (dependency: "+d+"). If the module exists, does it return a value?";return c("DependencyException",f,e)},d.notImplementedException=function(a,b){return c("NotImplementedException",a,b)},d.notResolvableException=function(a){return d.dependencyException("The module cannot be resolved",a)},d},e=function(){var a={};return a.beforeRegisterEvents=[],a.afterRegisterEvents=[],a.beforeResolveEvents=[],a.afterResolveEvents=[],a.beforeNewChildEvents=[],a.afterNewChildEvents=[],a.onError=[],a},f=function(a,b){var c,d,f,h,i,j,k,l,m,n={},o=new e;return c=function(b,c){switch(b){case g.pipeline.beforeRegister:return o.beforeRegisterEvents.push(c),a;case g.pipeline.afterRegister:return o.afterRegisterEvents.push(c),a;case g.pipeline.beforeResolve:return o.beforeResolveEvents.push(c),a;case g.pipeline.afterResolve:return o.afterResolveEvents.push(c),a;case g.pipeline.beforeNewChild:return o.beforeNewChildEvents.push(c),a;case g.pipeline.afterNewChild:return o.afterNewChildEvents.push(c),a;case g.pipeline.onError:return o.onError.push(c),a;default:throw new Error("the pipeline event you are trying to register is not implemented (name: "+b+")")}},d=function(a,c){var d,e;for(d=0;d<a.length;d+=1)e=a[d],e.once&&a.splice(d,1),b["function"](e)&&e.apply(null,c)},f=function(b){d(n.events.beforeRegisterEvents,[a,b])},h=function(b){d(n.events.afterRegisterEvents,[a,b])},i=function(b){d(n.events.beforeResolveEvents,[a,b])},j=function(b){d(n.events.afterResolveEvents,[a,b])},k=function(b){d(n.events.beforeNewChildEvents,[a,b])},l=function(b,c){d(n.events.afterNewChildEvents,[a,b,c])},m=function(a){d(n.events.onError,[a])},n.events=o,n.registerEvent=c,n.onError=m,n.beforeRegister=f,n.afterRegister=h,n.beforeResolve=i,n.afterResolve=j,n.beforeNewChild=k,n.afterNewChild=l,n},d=function(d,e){return function(f,h,i,j,k){var l,n,o,p={},q=[],r=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g;return p.HilaryModule=function(a){var b={};if(d.not.string(a.name))throw k.argumentException("The module name is required","name");if(d.not.defined(a.factory))throw k.argumentException("The module factory is required","factory");return b.name=a.name,b.dependencies=a.dependencies||void 0,b.factory=a.factory,b.blueprint=a.blueprint,b},p.asyncHandler=function(a,b){var c=function(){var c;try{c=a()}catch(e){return void(d["function"](b)&&b(e))}d["function"](b)&&b(null,c)};m?m.nextTick(c):e.runAsync(c)},p.createChildContainer=function(a,b){b=b||{};var d;return b.parentContainer=a,i.beforeNewChild(b),d=new c(b),a.registerAsync&&d.useAsync(m),i.afterNewChild(b,d),d},l=function(a){return a.dependencies||"function"!=typeof a.factory?a:(a.dependencies=o(a.factory),a)},o=function(a){if(!a)return[];var b=a.toString().replace(r,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(s);return null===c&&(c=[]),c},n=function(a,b){return function(){var c=f.resolve(a),e=f.resolve(b),g=d.not["function"](c.signatureMatches),h="Blueprints must have a signatureMatches function";return g?{errors:[h],result:!1}:c.syncSignatureMatches(e)}},p.register=function(a){if(i.beforeRegister(a),a.name===g.containerRegistration||a.name===g.parentContainerRegistration)throw k.argumentException("The name you are trying to register is reserved","moduleName",a.name);return a=l(a),h[a.name]=a,d.string(a.blueprint)&&q.push({blueprintName:a.blueprint,moduleName:a.name}),p.asyncHandler(function(){i.afterRegister(a)}),a},p.resolve=function(a){var b,c;if(d.not.string(a))throw k.argumentException("The moduleName must be a string. If you are trying to resolve an array, use resolveMany.","moduleName");if(i.beforeResolve(a),b=h[a],void 0!==b)return c=p.invoke(b),p.returnResult({name:a,result:c},i);if(c=p.findResult(a))return p.returnResult({name:a,result:c},i);throw k.notResolvableException(a)},p.resolveMany=function(a,b){var c,e,g=[];if(d.not.array(a))throw k.argumentException("The moduleNameArray is required and must be an Array","moduleNameArray");if(d.not["function"](b))throw k.argumentException("The next argument is required and must be a Function","next");for(c=0;c<a.length;c+=1)try{e=f.resolve(a[c]),g.push(e)}catch(h){g.push(h)}return b.apply(null,g)},p.resolveManyAsync=function(a,b){var c,e=[],g={},h=function(a){return function(b){try{g[a]=f.resolve(a),b(null,null)}catch(c){b(c)}}};if(d.not.array(a))throw k.argumentException("The moduleNameArray is required and must be an Array","moduleNameArray");if(d.not["function"](b))throw k.argumentException("The next argument is required and must be a Function","next");for(c=0;c<a.length;c+=1)e.push(h(a[c]));m.parallel(e,function(a){b(a,g)})},p.resolveAsync=function(a,b){var c,e,f,g,j;c=function(b){d.not.string(a)?b(k.argumentException("The moduleName must be a string. If you are trying to resolve an array, use resolveManyAsync.","moduleName")):b(null,null)},e=function(b,c){c(null,i.beforeResolve(a))},f=function(b,c){var d;d=h[a],void 0!==d?p.invokeAsync(d,c):c(null,null)},g=function(b,c){b?c(null,b):c(null,p.findResult(a))},j=function(b,c){b?(i.afterResolve({name:a,result:b}),c(null,b)):c(k.notResolvableException(a))},m.waterfall([c,e,f,g,j],b)},p.findResult=function(c){if(c===g.containerRegistration)return h;if(c===g.parentContainerRegistration)return j.context.getContainer();if(void 0!==j)return j.resolve(c);if(b)try{return b(c)}catch(d){return null}else if(window)return a[c]},p.returnResult=function(a){return p.asyncHandler(function(){i.afterResolve(a)}),a.result},p.invoke=function(a){return d.array(a.dependencies)&&a.dependencies.length>0?p.applyDependencies(a):d["function"](a.factory)&&0===a.factory.length?a.factory.call():a.factory},p.invokeAsync=function(a,b){return d.array(a.dependencies)&&a.dependencies.length>0?void p.applyDependenciesAsync(a,b):void(d["function"](a.factory)&&0===a.factory.length?b(null,a.factory.call()):b(null,a.factory))},p.applyDependencies=function(a){var b,c=[],d=function(a){return p.resolve(a)};for(b=0;b<a.dependencies.length;b+=1)c.push(d(a.dependencies[b]));return a.factory.apply(null,c)},p.applyDependenciesAsync=function(a,b){var c,d=[],e=function(a){return function(b){p.resolveAsync(a,b)}};for(c=0;c<a.dependencies.length;c+=1)d.push(e(a.dependencies[c]));m.parallel(d,function(c,d){b(null,a.factory.apply(null,d))})},p.makeAutoRegistrationTasks=function(a,b){var c,e,f=[];if(d.object(a)&&(a.name||a.dependencies||a.factory))f.push(function(){b(a).call()});else if(d.object(a))for(c in a)a.hasOwnProperty(c)&&f.push(b(a[c]));else{if(!d.array(a))throw k.argumentException("A index must be defined and must be a typeof object or array","index");for(e=0;e<a.length;e+=1)f.push(b(a[e]))}return f},p.autoRegister=function(a,b){var c,e,f;c=function(a){return function(){p.register(a)}};try{for(e=p.makeAutoRegistrationTasks(a,c),f=0;f<e.length;f+=1)e[f]();d["function"](b)&&b(null)}catch(g){b(g)}},p.autoResolve=function(a,b){var c,e,g;c=function(a){return function(){d.array(a.dependencies)&&d["function"](a.factory)?f.resolveMany(a.dependencies,a.factory):d["function"](a.factory)&&0===a.factory.length&&a.factory()}};try{for(e=p.makeAutoRegistrationTasks(a,c),g=0;g<e.length;g+=1)e[g]();d["function"](b)&&b(null,null)}catch(h){b(h)}},p.autoResolveAsync=function(a,b){var c;c=function(a){return function(b){d.array(a.dependencies)&&d["function"](a.factory)?(f.resolveManyAsync(a.dependencies,a.factory),b(null,null)):d["function"](a.factory)&&0===a.factory.length?(a.factory(),b(null,null)):b(k.argumentException("One or more of the items in this index do not meet the requirements for resolution.","index",a))}},m.parallel(p.makeAutoRegistrationTasks(a,c),b)},p.dispose=function(a){var b,c,e;if(d.string(a))return p.disposeOne(a);if(d.array(a)){for(e=!0,c=0;c<a.length;c+=1)e=e&&p.disposeOne(a[c]);return e}if(a)return!1;e=!0;for(b in h)h.hasOwnProperty(b)&&(e=e&&p.disposeOne(b));return e},p.disposeOne=function(a){return h[a]?(delete h[a],!0):!1},p.validateBlueprints=function(){var a,b,c=[],d=[],e=!0;for(b=0;b<q.length;b+=1)c.push(n(q[b].blueprintName,q[b].moduleName));for(b=0;b<c.length;b+=1)a=c[b](),a.result===!1&&(d.concat(a.errors),e=!1);return e?{errors:null,result:!0}:{errors:d,result:!1}},p.validateBlueprintsAsync=function(a){var b,c,d=[];for(b=function(a){return function(b){var c=n(q[a].blueprintName,q[a].moduleName)();b(c.errors,c.result)}},c=0;c<q.length;c+=1)d.push(b(c));m.parallel(d,a)},p.useAsync=function(a){if(!(a&&a.nextTick&&a.waterfall&&a.parallel))throw k.argumentException("The async library is required (https://www.npmjs.com/package/async)","async");return m||(m=a),f.registerAsync=function(a,b){return p.asyncHandler(function(){return f.register(a)},b),f},f.autoRegisterAsync=function(a,b){var c;return c=function(a){return function(b){f.registerAsync(a,b)}},m.parallel(p.makeAutoRegistrationTasks(a,c),b),f},f.resolveAsync=function(a,b){return p.resolveAsync(a,b),f},f.resolveManyAsync=function(a,b){return p.resolveManyAsync(a,b),f},f.autoResolveAsync=function(a,b){return p.autoResolveAsync(a,b),f},f.disposeAsync=function(a,b){var c=b,e=a;return d["function"](a)&&(c=a,e=null),p.asyncHandler(function(){return f.dispose(e)},c),f},f.validateBlueprintsAsync=function(a){return p.validateBlueprintsAsync(a),f},f.registerEventAsync=function(a,b,c){return p.asyncHandler(function(){return f.registerEvent(a,b)},c),f},f},p}}(h,j),c=function(a){var b=this,c=a||{},e={},j=c.parentContainer,k=c.pipeline||new f(b,h),m=new l(h,k),q={},r={},s=new d(b,e,k,j,m);for(b.createChildContainer=function(a){var c;return c="string"==typeof a?{name:a}:h.object(a)?a:{},s.createChildContainer(b,c)},b.setParentContainer=function(a){"function"==typeof a.register&&"function"==typeof a.resolve&&(j=a,s=new d(b,e,k,j,m))},b.register=function(a){return s.register(new s.HilaryModule(a)),b},b.autoRegister=function(a,c){return s.autoRegister(a,c),b},b.resolve=function(a){return s.resolve(a)},b.resolveMany=function(a,b){return s.resolveMany(a,b)},b.autoResolve=function(a,c){return s.autoResolve(a,c),b},b.dispose=function(a){return s.dispose(a)},b.registerEvent=function(a,c){return k.registerEvent(a,c),b},b.validateBlueprints=function(){return s.validateBlueprints()},b.useAsync=function(a){return s.useAsync(a),b},b.getContext=function(){return{container:e,parent:j,pipeline:k,HilaryModule:s.HilaryModule,register:s.register,constants:g,is:h,id:i,exceptionHandlers:m}},q.count=0;q.count<n.length;q.count+=1)q.current=n[q.count],h["function"](q.current.factory)?b[q.current.name]=q.current.factory(b):h.defined(q.current.factory)&&(b[q.current.name]=q.current.factory);for(r.count=0;r.count<p.length;r.count+=1)r.current=p[r.count],h["function"](r.current)&&r.current(b,c);c.name&&(o[c.name]=b)},c.extend=function(a,b){return n.push({name:a,factory:b}),!0},c.onInit=function(a){return p.push(a),!0},c.scope=function(a,b){return o[a]?o[a]:(o[a]=new c(b),o[a])},c.Blueprint=k,a.Hilary=c}("undefined"!=typeof module&&module.exports?module.exports:window,"undefined"!=typeof module&&module.exports?require:void 0),function(a,b){"use strict";if(a.AMDContainer&&a.define&&a.require)return!1;var c=function(b){var c;b.extend("useAMD",function(a){var b=a.getContext(),c=b.is,d=b.exceptionHandlers,e=b.constants;return function(){return a.define=function(b,e,f){if(c["function"](f))return a.register({name:b,dependencies:e,factory:f});if(c.string(b)&&c["function"](e))return a.register({name:b,factory:e});if(c.array(b)&&c["function"](e))return a.autoResolve({dependencies:b,factory:e});if(c["function"](b))return a.require(b);if(c.object(b)){var g;for(g in b)b.hasOwnProperty(g)&&a.register({name:g,factory:b[g]});return a}if(c.string(b)&&c.object(e))return a.register({name:b,factory:e});throw d.argumentException("A factory function was not found to define "+b,"factory")},a.require=function(d,e){return c["function"](d)?d(a.require,b.container,window||module):"string"==typeof d?a.resolve(d):a.resolveMany(d,e)},a.registerEvent(e.pipeline.afterNewChild,function(a,b,c){c.useAMD()}),a}}),c=b.scope("__AMD").useAMD(),a.AMDContainer=c,a.define=c.define,a.define.amd={},a.require=c.require};b?c(b):a.useAMD=function(a){c(a)}}("undefined"!=typeof module&&module.exports?module.exports:window,"undefined"!=typeof window?window.Hilary:null);