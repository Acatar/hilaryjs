var hilary=function(){"use strict";var e,n,t,r;return e=function(){var e={},n=Object.prototype,t=n.toString,r=n.hasOwnProperty,i={},o=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(var u in o){var a=o[u];i["[object "+a+"]"]=a.toLowerCase()}return e.isWindow=function(e){return null!=e&&e==e.window},e.type=function(e){return"undefined"==typeof e?"undefined":null===e?String(e):"object"==typeof e||"function"==typeof e?i[t.call(e)]||"object":typeof e},e.notDefined=function(n){try{return"undefined"===e.type(n)}catch(t){return!0}},e.isDefined=function(n){try{return"undefined"!==e.type(n)}catch(t){return!1}},e.isFunction=function(n){return"function"===e.type(n)},e.notFunction=function(n){return"function"!==e.type(n)},e.isArray=function(n){return"array"===e.type(n)},e.notArray=function(n){return"array"!==e.type(n)},e.isObject=function(n){if(!n||"object"!==e.type(n)||n.nodeType||e.isWindow(n))return!1;try{if(n.constructor&&!r.call(n,"constructor")&&!r.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var i;for(i in n);return void 0===i||r.call(n,i)},e.isPlainObject=e.isObject,e.notObject=function(n){return e.isObject(n)===!1},e.isEmptyObject=function(e){var n;for(n in e)return!1;return!0},e.isString=function(n){return"string"===e.type(n)},e.notString=function(n){return"string"!==e.type(n)},e.isBoolean=function(n){return"boolean"===e.type(n)},e.notBoolean=function(n){return"boolean"!==e.type(n)},e.notNullOrWhitespace=function(n){if(!n)return!1;if(e.notString(n))throw new Error("Unable to check if a non-string is whitespace.");return/([^\s])/.test(n)},e.isNullOrWhitespace=function(n){return 0==e.notNullOrWhitespace(n)},e}(),n=function(e){var n={};return n.exception=function(n,t,r){var i=e.isString(t)?t:n,o=new Error(i);return o.message=i,n!=i&&(o.name=n),r&&(o.data=r),o},n.argumentException=function(t,r,i){var o=e.notDefined(r)?t:t+" (argument: "+r+")";return n.exception("ArgumentException",o,i)},n.dependencyException=function(t,r,i){var o=e.notDefined(r)?t:t+" (dependency: "+r+")";return n.exception("DependencyException",o,i)},n.notImplementedException=function(e,t){return n.exception("NotImplementedException",e,t)},n}(e),r=function(e,t){throw n.dependencyException("The module cannot be resolved",e)},(t=function(i){var o={},u=i||{},a=u.utils||e,c=u.exceptions||n,s=u.notResolvableHandler||r,f=u.parentContainer,l,p={containerRegistration:"hilary::container",parentContainerRegistration:"hilary::parent"},d={beforeRegister:"hilary::before::register",afterRegister:"hilary::after::register",beforeResolve:"hilary::before::resolve",afterResolve:"hilary::after::resolve",beforeNewChild:"hilary::before::new::child",afterNewChild:"hilary::after::new::child"};return l=a.isObject(u.container)?u.container:{},o.confirm=function(e,n){if(a.isNullOrWhitespace(e))throw c.argumentException("The name cannot be null when confirming a dependency","name");if(a.notDefined(n))throw c.argumentException("A dependency is missing, are you missing a reference?",e);return n},o.createContainer=function(e){return t(e)},o.createChildContainer=function(e){e=e||{},e.parentContainer=o,a.isFunction(l[d.beforeNewChild])&&l[d.beforeNewChild](l,e);var n=t(e);return a.isFunction(l[d.afterNewChild])&&l[d.afterNewChild](l,e,n),n},o.getContainer=function(){return l},o.getParentContainer=function(){return f.getContainer()},o.getContext=o.getContainer,o.use=function(e,n){return a.isFunction(u.beforeUse)&&u.beforeUse(e,n),a.isFunction(e)?e(l):a.isArray(e)&&a.isFunction(n)?(e.unshift(l),n.apply(null,e)):a.isFunction(n)&&n(l),a.isFunction(u.afterUse)&&u.afterUse(e,n),o},o.run=o.use,o.register=function(e,n){return a.isFunction(l[d.beforeRegister])&&l[d.beforeRegister](l,e,n),a.isFunction(e)?(e(l),o):(a.notString(e)&&c.argumentException("The first argument must be the name of the module","moduleNameOrFunc"),a.notDefined(n)&&c.argumentException("The second argument must be the module definition","moduleDefinition"),l[e]=n,a.isFunction(l[d.afterRegister])&&l[d.afterRegister](l,e,n),o)},o.moduleExists=function(e){var n=l[e];return void 0!==n?!0:void 0===f?!1:f.moduleExists(e)},o.resolveOne=function(e){a.isFunction(u.beforeResolveOne)&&u.beforeResolveOne(e);var n=l[e];return void 0!==n?n:(void 0===f&&s(e,o),f.resolveOne(e))},o.resolve=function(e,n){if(a.isFunction(l[d.beforeResolve])&&l[d.beforeResolve](l,e,n),a.isString(e)){var t=o.resolveOne(e);return a.isFunction(l[d.afterResolve])&&l[d.afterResolve](l,e,n),t}if(!a.isArray(e)||!a.isFunction(n))throw c.argumentException("one or more of the arguments passed are invalid","module name, dependencies or callback");var r=[];for(var i in e){var u=e[i];r.push(u===p.containerRegistration?l:u===p.parentContainerRegistration&&void 0!==f?o.getParentContainer():u===p.parentContainerRegistration?null:o.resolveOne(u))}return n.apply(null,r),a.isFunction(l[d.afterResolve])&&l[d.afterResolve](l,e,n),o},o})({utils:e,exceptions:n,notResolvableHandler:r})}();